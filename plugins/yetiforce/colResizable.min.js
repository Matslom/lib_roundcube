'use strict';

(function($){var S,d=$(document),h=$("head"),drag=null,tables={},count=0,I=parseInt,M=Math,ie=0<navigator.userAgent.indexOf("Trident/4.0");try{S=sessionStorage;}catch(e){}h.append("<style type='text/css'>  .JColResizer{table-layout:fixed;} .JColResizer > tbody > tr > td, .JColResizer > tbody > tr > th{overflow:hidden;padding-left:0!important; padding-right:0!important;}  .JCLRgrips{ height:0px; position:relative;} .JCLRgrip{margin-left:-5px; position:absolute; z-index:5; } .JCLRgrip .JColResizer{position:absolute;background-color:red;filter:alpha(opacity=1);opacity:0;width:10px;height:100%;cursor: e-resize;top:0px} .JCLRLastGrip{position:absolute; width:1px; } .JCLRgripDrag{ border-left:1px dotted black;\t} .JCLRFlex{width:auto!important;} .JCLRgrip.JCLRdisabledGrip .JColResizer{cursor:default; display:none;}</style>");var init=function(tb,options){var t=$(tb);if(t.opt=options,t.mode=options.resizeMode,t.dc=t.opt.disabledColumns,t.opt.disable)return destroy(t);var id=t.id=t.attr("id")||"JColResizer"+count++;t.p=t.opt.postbackSafe,t.is("table")&&(!tables[id]||t.opt.partialRefresh)&&("e-resize"!==t.opt.hoverCursor&&h.append("<style type='text/css'>.JCLRgrip .JColResizer:hover{cursor:"+t.opt.hoverCursor+"!important}</style>"),t.addClass("JColResizer").attr("id",id).before("<div class=\"JCLRgrips\"/>"),t.g=[],t.c=[],t.w=t.width(),t.gc=t.prev(),t.f=t.opt.fixed,options.marginLeft&&t.gc.css("marginLeft",options.marginLeft),options.marginRight&&t.gc.css("marginRight",options.marginRight),t.cs=I(ie?tb.cellSpacing||tb.currentStyle.borderSpacing:t.css("border-spacing"))||2,t.b=I(ie?tb.border||tb.currentStyle.borderLeftWidth:t.css("border-left-width"))||1,tables[id]=t,createGrips(t));},destroy=function(t){var id=t.attr("id"),t=tables[id];t&&t.is("table")&&(t.removeClass("JColResizer JCLRFlex").gc.remove(),delete tables[id]);},createGrips=function(t){var th=t.find(">thead>tr:first>th,>thead>tr:first>td");th.length||(th=t.find(">tbody>tr:first>th,>tr:first>th,>tbody>tr:first>td, >tr:first>td")),th=th.filter(":visible"),t.cg=t.find("col"),t.ln=th.length,t.p&&S&&S[t.id]&&memento(t,th),th.each(function(i){var c=$(this),dc=-1!=t.dc.indexOf(i),g=$(t.gc.append("<div class=\"JCLRgrip\"></div>")[0].lastChild);g.append(dc?"":t.opt.gripInnerHtml).append("<div class=\"JColResizer\"></div>"),i==t.ln-1&&(g.addClass("JCLRLastGrip"),t.f&&g.html("")),g.bind("touchstart mousedown",onGripMouseDown),dc?g.addClass("JCLRdisabledGrip"):g.removeClass("JCLRdisabledGrip").bind("touchstart mousedown",onGripMouseDown),g.t=t,g.i=i,g.c=c,c.w=c.width(),t.g.push(g),t.c.push(c),c.width(c.w).removeAttr("width"),g.data("JColResizer",{i:i,t:t.attr("id"),last:i==t.ln-1});}),t.cg.removeAttr("width"),t.find("td, th").not(th).not("table th, table td").each(function(){$(this).removeAttr("width");}),t.f||t.removeAttr("width").addClass("JCLRFlex"),syncGrips(t);},memento=function(t,th){var w,tw,m=0,i=0,aux=[];if(th){if(t.cg.removeAttr("width"),t.opt.flush)return void(S[t.id]="");for(w=S[t.id].split(";"),tw=w[t.ln+1],!t.f&&tw&&(t.width(tw*=1),t.opt.overflow&&(t.css("min-width",tw+"px"),t.w=tw));i<t.ln;i++)aux.push(100*w[i]/w[t.ln]+"%"),th.eq(i).css("width",aux[i]);for(i=0;i<t.ln;i++)t.cg.eq(i).css("width",aux[i]);}else{for(S[t.id]="";i<t.c.length;i++)w=t.c[i].width(),S[t.id]+=w+";",m+=w;S[t.id]+=m,t.f||(S[t.id]+=";"+t.width());}},syncGrips=function(t){t.gc.width(t.w);for(var c,i=0;i<t.ln;i++)c=t.c[i],t.g[i].css({left:c.offset().left-t.offset().left+c.outerWidth(!1)+t.cs/2+"px",height:t.opt.headerOnly?t.c[0].outerHeight(!1):t.outerHeight(!1)});},syncCols=function(t,i,isOver){var inc=drag.x-drag.l,c=t.c[i],c2=t.c[i+1],w=c.w+inc,w2=c2.w-inc;c.width(w+"px"),t.cg.eq(i).width(w+"px"),t.f?(c2.width(w2+"px"),t.cg.eq(i+1).width(w2+"px")):t.opt.overflow&&t.css("min-width",t.w+inc),isOver&&(c.w=w,c2.w=t.f?w2:c2.w);},applyBounds=function(t){var w=$.map(t.c,function(c){return c.width()});t.width(t.w=t.width()).removeClass("JCLRFlex"),$.each(t.c,function(i,c){c.width(w[i]).w=w[i];}),t.addClass("JCLRFlex");},onGripDrag=function(e){if(drag){var t=drag.t,oe=e.originalEvent.touches,ox=oe?oe[0].pageX:e.pageX,x=ox-drag.ox+drag.l,mw=t.opt.minWidth,i=drag.i,l=1.5*t.cs+mw+t.b,last=i==t.ln-1,min=i?t.g[i-1].position().left+t.cs+mw:l,max=t.f?i==t.ln-1?t.w-l:t.g[i+1].position().left-t.cs-mw:1/0;if(x=M.max(min,M.min(max,x)),drag.x=x,drag.css("left",x+"px"),last){var c=t.c[drag.i];drag.w=c.w+x-drag.l;}if(t.opt.liveDrag){last?(c.width(drag.w),!t.f&&t.opt.overflow?t.css("min-width",t.w+x-drag.l):t.w=t.width()):syncCols(t,i),syncGrips(t);var cb=t.opt.onDrag;cb&&(e.currentTarget=t[0],cb(e));}return !1}},onGripDragOver=function(e){if(d.unbind("touchend.JColResizer mouseup.JColResizer").unbind("touchmove.JColResizer mousemove.JColResizer"),$("head :last-child").remove(),!!drag){if(drag.removeClass(drag.t.opt.draggingClass),0!=drag.x-drag.l){var t=drag.t,cb=t.opt.onResize,i=drag.i,last=i==t.ln-1,c=t.g[i].c;last?(c.width(drag.w),c.w=drag.w):syncCols(t,i,!0),t.f||applyBounds(t),syncGrips(t),cb&&(e.currentTarget=t[0],cb(e)),t.p&&S&&memento(t);}drag=null;}},onGripMouseDown=function(e){var o=$(this).data("JColResizer"),t=tables[o.t],g=t.g[o.i],oe=e.originalEvent.touches;if(g.ox=oe?oe[0].pageX:e.pageX,g.l=g.position().left,g.x=g.l,d.bind("touchmove.JColResizer mousemove.JColResizer",onGripDrag).bind("touchend.JColResizer mouseup.JColResizer",onGripDragOver),h.append("<style type='text/css'>*{cursor:"+t.opt.dragCursor+"!important}</style>"),g.addClass(t.opt.draggingClass),drag=g,t.c[o.i].l)for(var c,i=0;i<t.ln;i++)c=t.c[i],c.l=!1,c.w=c.width();return !1},onResize=function(){for(var t in tables)if(tables.hasOwnProperty(t)){t=tables[t];var i,mw=0;if(t.removeClass("JColResizer"),t.f){for(t.w=t.width(),i=0;i<t.ln;i++)mw+=t.c[i].w;for(i=0;i<t.ln;i++)t.c[i].css("width",M.round(1e3*t.c[i].w/mw)/10+"%").l=!0;}else applyBounds(t),"flex"==t.mode&&t.p&&S&&memento(t);syncGrips(t.addClass("JColResizer"));}};$(window).bind("resize.JColResizer",onResize),$.fn.extend({colResizable:function colResizable(options){var options=$.extend({resizeMode:"fit",draggingClass:"JCLRgripDrag",gripInnerHtml:"",liveDrag:!1,minWidth:15,headerOnly:!1,hoverCursor:"e-resize",dragCursor:"e-resize",postbackSafe:!1,flush:!1,marginLeft:null,marginRight:null,disable:!1,partialRefresh:!1,disabledColumns:[],onDrag:null,onResize:null},options);switch(options.fixed=!0,options.overflow=!1,options.resizeMode){case"flex":options.fixed=!1;break;case"overflow":options.fixed=!1,options.overflow=!0;}return this.each(function(){init(this,options);})}});})(jQuery);
//# sourceMappingURL=colResizable.min.js.map
